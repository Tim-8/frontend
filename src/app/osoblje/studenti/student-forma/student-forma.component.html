<div class="student-forma-container">
  <p class="subtitle">Upis studenata</p>
  <form [formGroup]="studentForm" (submit)="kreirajStudenta()">
    <div class="form-group">
      <label for="Ime">Ime i prezime</label>
      <input
        type="text"
        id="ime"
        formControlName="ime"
        class="form-control"
        [ngClass]="{'is-invalid': studentForm.get('ime')?.invalid && (studentForm.get('ime')?.dirty || studentForm.get('ime')?.touched)}">
      <div *ngIf="studentForm.get('ime')?.invalid && (studentForm.get('ime')?.dirty || studentForm.get('ime')?.touched)" class="invalid-feedback">
        <div *ngIf="studentForm.get('ime')?.errors?.['required']">
            Ime i prezime je obavezno
        </div>
      </div>
    </div>

    <div class="form-group">
      <label for="JMBG">JMBG</label>
      <input 
        type="text"
        id="jmbg"
        formControlName="jmbg"
        class="form-control"
        [ngClass]="{'is-invalid': studentForm.get('jmbg')?.invalid && (studentForm.get('jmbg')?.dirty || studentForm.get('jmbg')?.touched)}"> 
        <div *ngIf="studentForm.get('jmbg')?.invalid && (studentForm.get('jmbg')?.dirty && studentForm.get('jmbg')?.touched)" >
          <div *ngIf="studentForm.get('jmbg')?.errors?.['required']">JMBG je obavezan</div>
          <div *ngIf="studentForm.get('jmbg')?.errors?.['minlength']">JMBG mora imati 13 cifara</div>
        </div>  
    </div>

    <div class="form-group">
      <label for="BrojIndeksa">Broj indeksa</label>
      <input 
        type="text"
        id="brojIndeksa"
        formControlName="brojIndeksa"
        class="form-control"
        [ngClass]="{'is-invalid': studentForm.get('brojIndeksa')?.invalid && (studentForm.get('brojIndeksa')?.dirty || studentForm.get('brojIndeksa')?.touched)}"> 
        <div *ngIf="studentForm.get('brojIndeksa')?.invalid && (studentForm.get('brojIndeksa')?.dirty && studentForm.get('brojIndeksa')?.touched)" >
          <div *ngIf="studentForm.get('brojIndeksa')?.errors?.['required']">
            Broj indeksa je obavezan
          </div>
          <div *ngIf="studentForm.get('brojIndeksa')?.errors?.['minlength']">
            Broj indeksa mora imati 10 cifara
          </div>
        </div>  
    </div>

    <div class="form-group">
      <label for="DatumUpisa">Datum upisa</label>
      <input 
        type="text"
        id="datumUpisa"
        formControlName="datumUpisa"
        class="form-control"
        [ngClass]="{'is-invalid': studentForm.get('datumUpisa')?.invalid && (studentForm.get('datumUpisa')?.dirty || studentForm.get('datumUpisa')?.touched)}"> 
        <div *ngIf="studentForm.get('datumUpisa')?.invalid && (studentForm.get('datumUpisa')?.dirty && studentForm.get('datumUpisa')?.touched)" >
          <div *ngIf="studentForm.get('datumUpisa')?.errors?.['required']">
            Datum upisa je obavezan
          </div>
        </div>  
    </div>

    <div class="form-group">
      <label for="Godina">Godina</label>
      <input 
        type="text"
        id="godina"
        formControlName="godina"
        class="form-control"
        [ngClass]="{'is-invalid': studentForm.get('godina')?.invalid && (studentForm.get('godina')?.dirty || studentForm.get('godina')?.touched)}"> 
        <div *ngIf="studentForm.get('godina')?.invalid && (studentForm.get('godina')?.dirty && studentForm.get('godina')?.touched)" >
          <div *ngIf="studentForm.get('godina')?.errors?.['required']">
            Godina je obavezan
          </div>
        </div>  
    </div>

    <div class="form-group">
      <label>Predmeti</label>
      <div *ngFor="let predmet of predmetiLista">
        <label>
          <input
            type="checkbox"
            [value]="predmet.id"
            (change)="onCheckboxChange($event)"
            />
            {{ predmet.naziv }}
        </label>
      </div>
    </div>

    <div class="form-group">
      <label for="Fakultet">Fakultet</label>
      <select id="fakultet" formControlName="fakultet" class="form-control">
        <option value="">Izaberite fakultet</option>
        <option *ngFor="let fakultet of fakulteti" [ngValue]="fakultet">{{ fakultet.naziv }}</option>    
      </select>
    </div>

    <div class="form-group"> 
        <button type="submit" class="btn" [disabled]="studentForm.invalid">
            Kreiraj
        </button>
    </div>
  </form>
</div>
