<app-admin-menu></app-admin-menu>

<div class="nastavnik-forma-container">
    <p class="subtitle">Podaci o nastavniku</p>
    <form [formGroup]="nastavnikForma" (ngSubmit)="kreirajNastavnika()">

    <div class="form-group">
        <label for="korisnickoIme">Korisničko ime</label>
        <input 
            type="text"
            id="korisnickoIme"
            formControlName="korisnickoIme"
            class="form-control"
            [ngClass]="{'is-invalid': nastavnikForma.get('korisnickoIme')?.invalid && (nastavnikForma.get('korisnickoIme')?.dirty || nastavnikForma.get('korisnickoIme')?.touched)}">
        <div *ngIf="nastavnikForma.get('korisnickoIme')?.invalid && (nastavnikForma.get('korisnickoIme')?.dirty || nastavnikForma.get('korisnickoIme')?.touched)" class="invalid-feedback">
            <div *ngIf="nastavnikForma.get('korisnickoIme')?.errors?.['required']">
            Korisničko ime je obavezno
            </div>
            <div *ngIf="nastavnikForma.get('korisnickoIme')?.errors?.['minlength']">
            Korisničko ime mora imati najmanje 3 karaktera
            </div>
        </div>
    </div>     
    
    <div class="form-group">
        <label for="email">Email adresa</label>
        <input 
        type="email"
        id="email"
        formControlName="email"
        class="form-control"
        [ngClass]="{'is-invalid': nastavnikForma.get('email')?.invalid && (nastavnikForma.get('email')?.dirty || nastavnikForma.get('email')?.touched)}">
        <div *ngIf="nastavnikForma.get('email')?.invalid && (nastavnikForma.get('email')?.dirty || nastavnikForma.get('email')?.touched)" class="invalid-feedback">
        <div *ngIf="nastavnikForma.get('email')?.errors?.['required']">
            Email adresa je obavezna
        </div>
        <div *ngIf="nastavnikForma.get('email')?.errors?.['email']">
            Unesite validnu email adresu
        </div>
        </div>
    </div>

    <div class="form-group">
        <label for="lozinka">Lozinka</label>
        <input 
        type="password"
        id="lozinka"
        formControlName="lozinka"
        class="form-control"
        [ngClass]="{'is-invalid': nastavnikForma.get('lozinka')?.invalid && (nastavnikForma.get('lozinka')?.dirty || nastavnikForma.get('lozinka')?.touched)}">
        <div *ngIf="nastavnikForma.get('lozinka')?.invalid && (nastavnikForma.get('lozinka')?.dirty || nastavnikForma.get('lozinka')?.touched)" class="invalid-feedback">
        <div *ngIf="nastavnikForma.get('lozinka')?.errors?.['required']">
            Lozinka je obavezna
        </div>
        <div *ngIf="nastavnikForma.get('lozinka')?.errors?.['minlength']">
            Lozinka mora imati najmanje 6 karaktera
        </div>
        </div>
    </div>

    <div class="form-group">
        <label for="potvrdaLozinke">Potvrda lozinke</label>
        <input 
            type="password"
            id="potvrdaLozinke"
            formControlName="potvrdaLozinke"
            class="form-control"
            [ngClass]="{'is-invalid': nastavnikForma.get('potvrdaLozinke')?.invalid && (nastavnikForma.get('potvrdaLozinke')?.dirty || nastavnikForma.get('potvrdaLozinke')?.touched)}">
        <div *ngIf="nastavnikForma.get('potvrdaLozinke')?.invalid && (nastavnikForma.get('potvrdaLozinke')?.dirty || nastavnikForma.get('potvrdaLozinke')?.touched)" class="invalid-feedback">
            <div *ngIf="nastavnikForma.get('potvrdaLozinke')?.errors?.['required']">
            Potvrda lozinke je obavezna
            </div>
            <div *ngIf="nastavnikForma.hasError('lozinkeSeNePodudaraju', ['potvrdaLozinke'])">
            Lozinke se ne podudaraju
            </div>
        </div>
    </div>

    <div class="form-group">
        <label for="ime">Ime</label>
        <input
            type="text"
            id="ime"
            formControlName="ime"
            class="form-control"
            [ngClass]="{'is-invalid': nastavnikForma.get('ime')?.invalid && (nastavnikForma.get('ime')?.dirty || nastavnikForma.get('ime')?.touched)}">
        <div *ngIf="nastavnikForma.get('ime')?.invalid && (nastavnikForma.get('ime')?.dirty || nastavnikForma.get('ime')?.touched)" class="invalid-feedback">
            <div *ngIf="nastavnikForma.get('ime')?.errors?.['required']">
                Ime je obavezno
            </div>
        </div>
    </div>

    <div class="form-group">
        <label for="jmbg">JMBG</label>
        <input
            type="text"
            id="jmbg"
            formControlName="jmbg"
            class="form-control"
            [ngClass]="{'is-invalid': nastavnikForma.get('jmbg')?.invalid && (nastavnikForma.get('jmbg')?.dirty || nastavnikForma.get('jmbg')?.touched)}">
        <div *ngIf="nastavnikForma.get('jmbg')?.invalid && (nastavnikForma.get('jmbg')?.dirty || nastavnikForma.get('jmbg')?.touched)" class="invalid-feedback">
            <div *ngIf="nastavnikForma.get('jmbg')?.errors?.['required']">JMBG je obavezan</div>
            <div *ngIf="nastavnikForma.get('jmbg')?.errors?.['minlength']">JMBG mora imati 13 cifara</div>
        </div>
    </div>

    <div class="form-group">
        <label for="biografija">Biografija</label>
        <textarea
            id="biografija"
            formControlName="biografija"
            class="form-control"
            rows="3"></textarea>
    </div>

    <div class="form-group">
        <label for="zvanje">Zvanje</label>
        <select id="zvanje" formControlName="zvanjeId" class="form-control">
            <option value="">Izaberi zvanje</option>
            <option *ngFor="let zvanje of zvanja" [value]="zvanje.id">{{ zvanje.naziv }}</option>
        </select>
    </div>

    <div class="form-group">
        <label for="naucnaOblast">Naučna oblast</label>
        <select id="naucnaOblast" formControlName="naucnaOblastId" class="form-control">
            <option value="">Izaberi oblast</option>
            <option *ngFor="let oblast of naucneOblasti" [value]="oblast.id">{{ oblast.naziv }}</option>
        </select>
    </div>

    <div class="form-group">
        <label for="brojCasova">Broj časova</label>
        <input
            type="number"
            id="brojCasova"
            formControlName="brojCasova"
            class="form-control"
            min="0">
    </div>

    <div class="form-group"> 
        <button type="submit" class="btn" [disabled]="nastavnikForma.invalid">
        Kreiraj
        </button>
    </div>
    </form>
</div>